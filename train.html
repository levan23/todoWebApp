<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Lazy to do</title>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
	<script src="todo.js"></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/ngStorage/0.3.11/ngStorage.min.js'></script>
</head>

<body>

<div ng-app="myApp" ng-controller="myCtrl">
  <ul>
    <li ng-repeat="x in todos">
    	<b>Name:</b> {{x.name}} <b>Description:</b> {{x.description}} <b>Target Date:</b> {{x.targetDate+" "}}
    	<b>Date Created:</b> {{x.dateCreated | date}} <small><span ng-repeat="y in x.tags">#{{y+", "}}</span></small>

    </li>
  </ul>
  
  <form name="myform" novalidate>
  	<p><b>Name</b><input type="text" name="name" ng-model="name" required>
  		<span style="color:red" ng-show="myform.name.$dirty && myform.name.$invalid"></span>
  		<span ng-show="form.targetDate.$error.required">Name required
  	</p>
  	<p><strong>description</strong><input type="text" name="description" ng-model="description" required></p>
  	<p><strong>Target date</strong><input type="date" name="targetDate" ng-model="targetDate" 
  											placeholder="YYYY-MM-DD" min={{dnow}} required>
  		<span style="color:red" ng-show="myform.targetDate.$touched && 
  					myform.targetDate.$invalid && !myform.targetDate.$error.date">Incorrect date!</span>
		<span style="color:red" ng-show="myform.targetDate.$error.date">Not a valid date!</span>
		<!-- <span style="color:red" ng-show="myform.targetDate.$error">error</span> -->
  	</p>
  	<p><b>Tags</b><input name="tags" ng-model="tags" placeholder="Separate by commas" required></p>

  <button ng-disabled="myform.name.$invalid || myform.description.$invalid
  			|| myform.targetDate.$error.date || myform.targetDate.$invalid || 
  			myform.tags.$invalid" ng-click='addItem()'>Add</button>
  <!-- <p ng-style={color:"red"}>{{errortext}}</p> -->
  </form>
  <button type='submit' ng-click="resetFunc()">Reset localstorage</button>
</div>

</body>
</html>
